"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[4605],{3421:(e,t,a)=>{a.d(t,{BH:()=>l});var r,n=a(63469);e=a.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,s,i="{{rootDomain}}",c="{{network}}";function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e?e.replace(c,t):e}function l(e){switch(e){case"base":return d(n.M9,e);case"base-goerli":return d(n.ah,e);case"arbitrum-sepolia":return n.Rw;case"opBNB":return n.OZ;default:return d(n.IY,e)}}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(o.register(".","DOT","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register(i,"ROOT_DOMAIN","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register(c,"NETWORK","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null!=t&&t.hostname?t.hostname:window.location.hostname,r=a.split(".");return r.length>2?r.slice(-e).join("."):a}),"getLevelDomain","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e?e.replace(i,t):e}),"replaceDomian","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register(d,"replaceNetwork","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js"),o.register(l,"replaceGraphQLNetwork","/Users/user/Documents/work/x-mono-benchmark/apps/cloud-onchain-trade-sdk/src/utils/getLevelDomain.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},66051:(e,t,a)=>{a.d(t,{B:()=>n,_:()=>o});var r=a(51485);const n=async()=>{const{data:e}=await(0,r.v_)("/bapi/futures/v1/public/future/asset/all-asset-logo",{});return e||[]},o=async()=>{const{data:e}=await(0,r.U2)("/bapi/futures/v1/public/future/asset/p-m-asset",{});return e||[]}},95386:(e,t,a)=>{a.d(t,{De:()=>M,KF:()=>B,Uo:()=>m,WO:()=>P,YE:()=>p,Z1:()=>v,cB:()=>u,g_:()=>b,v$:()=>N,yw:()=>f});var r=a(2850),n=a(26914),o=a(13391),s=a(5911),i=a(39710),c=a(51370),d=a(98943);const l=(0,r.F)(),u={price:8,qty:10,marginToken:18,usd:18,percent:4,feeRate:12},m={Available:0,Only_Reduce:1,Close:2},b=3e4,p={leverage:l?20:50,tp:2,sl:void 0,slippage:1},g={USDC:"USDC.e",WETH:"ETH"},h={USDBC:"USDbC",WETH:"ETH"},y={WBNB:"BNB",HAY:"lisUSD"},f={[n.y.id]:g,[o.Z.id]:g,[s.J.id]:h,8453:h,[i.e.id]:y,[c.d.id]:y},B=new Map([["0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c","WBNB"],["0xae13d989daC2f0dEbFf460aC112a837C89BAa7cd","WBNB"],["0x82aF49447D8a07e3bd95BD0d56f35241523fBab1","WETH"],["0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3","WETH"],["0x617d91847b74b70a3d3e3745445cb0d1b3c8560e","WBNB"],["0x4200000000000000000000000000000000000006","WBNB"],["0x4200000000000000000000000000000000000006","WETH"],["0x231401dC8b53338d78c08f83CC4EBc74148196d0","WETH"],["0x617d91847b74B70a3D3e3745445cb0d1b3c8560E","WBNB"],["0x980B62Da83eFf3D4576C647993b0c1D7faf17c73","WETH"]]),k=new Map([["BTCB","BTC"],["WBTC","BTC"],["tBNB","BNB"]]),P="https://apollox-finance.gitbook.io/apollox-finance/welcome/trading-on-v2/degen-trading-mode/dynamic-fee-for-degen-mode",M=(e,t={})=>{const a=e?k.get(e)??e:"";return t[a]||a},N=new Map([[d.ko.MINUTE1,{label:"60s",seconds:60}],[d.ko.MINUTE5,{label:"5m",seconds:300}],[d.ko.MINUTE10,{label:"10m",seconds:600}],[d.ko.MINUTE15,{label:"15m",seconds:900}],[d.ko.MINUTE30,{label:"30m",seconds:1800}],[d.ko.HOUR1,{label:"1h",seconds:3600}],[d.ko.HOUR2,{label:"2h",seconds:7200}],[d.ko.HOUR3,{label:"3h",seconds:10800}],[d.ko.HOUR4,{label:"4h",seconds:14400}],[d.ko.HOUR6,{label:"6h",seconds:21600}],[d.ko.HOUR8,{label:"8h",seconds:28800}],[d.ko.HOUR12,{label:"12h",seconds:43200}],[d.ko.DAY1,{label:"24h",seconds:86400}]]),v=new Map([...N.entries()].map((([e,t])=>[t.seconds,e])));var w;!function(e){e[e.Apx=1]="Apx",e[e.PancakeSwap=2]="PancakeSwap",e[e.BabySwap=3]="BabySwap",e[e.Leonicornswap=4]="Leonicornswap",e[e.MiniProgram=5]="MiniProgram"}(w||(w={}))},98943:(e,t,a)=>{var r,n,o;a.d(t,{cY:()=>n,ko:()=>o}),function(e){e[e.Apx=1]="Apx",e[e.PancakeSwap=2]="PancakeSwap",e[e.BabySwap=3]="BabySwap",e[e.Leonicornswap=4]="Leonicornswap",e[e.MiniProgram=5]="MiniProgram"}(r||(r={})),function(e){e[e.FIXED=0]="FIXED",e[e.ONE_PERCENT_DEPTH=1]="ONE_PERCENT_DEPTH",e[e.NET_POSITION=2]="NET_POSITION",e[e.DEGEN=3]="DEGEN"}(n||(n={})),function(e){e[e.MINUTE1=0]="MINUTE1",e[e.MINUTE5=1]="MINUTE5",e[e.MINUTE10=2]="MINUTE10",e[e.MINUTE15=3]="MINUTE15",e[e.MINUTE30=4]="MINUTE30",e[e.HOUR1=5]="HOUR1",e[e.HOUR2=6]="HOUR2",e[e.HOUR3=7]="HOUR3",e[e.HOUR4=8]="HOUR4",e[e.HOUR6=9]="HOUR6",e[e.HOUR8=10]="HOUR8",e[e.HOUR12=11]="HOUR12",e[e.DAY1=12]="DAY1"}(o||(o={}))},78659:(e,t,a)=>{a.d(t,{C:()=>s,R:()=>i});var r=a(52983),n=a(76748),o=a(4137);const s=(0,n.Ue)()((0,o.tJ)((e=>({tradingMode:"classic",isClassicMode:!0,isDegenMode:!1,isDumbMode:!1,switchMode:t=>{e((e=>Object.assign(Object.assign({},e),{tradingMode:t,isClassicMode:"classic"===t,isDegenMode:"degen"===t,isDumbMode:"dumb"===t})))}})),{name:"v2-trading-mode"})),i=()=>{const{isDegenMode:e,switchMode:t,tradingMode:a}=s();return(0,r.useMemo)((()=>({isDegenMode:e,toggleDegenMode:()=>t("degen"===a?"classic":"degen")})),[e,t,a])}},84542:(e,t,a)=>{a.d(t,{Tw:()=>b,pT:()=>m});var r=a(39710),n=a(51370),o=a(26914),s=a(13391),i=a(55945),c=a(45053),d=a(20399),l=a(5911);const u=new Map([[r.e.id,{name:"BNB Chain",iconUrlPath:"/static/images/wallet/bsc-logo.svg",color:"#F0B90B",apiNetwork:"bnb"}],[n.d.id,{name:"BNB Testnet",iconUrlPath:"/static/images/wallet/bsc-logo.svg",color:"#F0B90B",apiNetwork:"bnb-testnet"}],[o.y.id,{name:"Arbitrum",iconUrlPath:"/static/images/wallet/arb-logo.svg",color:"#28A0F0",apiNetwork:"arbitrum"}],[s.Z.id,{name:"Arbitrum Sepolia",iconUrlPath:"/static/images/wallet/arb-logo.svg",color:"#28A0F0",apiNetwork:"arbitrum-sepolia"}],[i.V.id,{name:"opBNB",iconUrlPath:"/static/images/wallet/opbnb-logo.svg",color:"#F0B90B",apiNetwork:"opBNB"}],[c.a.id,{name:"opBNB Testnet",iconUrlPath:"/static/images/wallet/opbnb-logo.svg",color:"#F0B90B",apiNetwork:"opBNBTestnet"}],[d.u.id,{name:"Base",iconUrlPath:"/static/images/wallet/base-logo.svg",color:"#3a7aff",apiNetwork:"base"}],[l.J.id,{name:"Base Goerli",iconUrlPath:"/static/images/wallet/base-logo.svg",color:"#3a7aff",apiNetwork:"base-goerli"}]]),m=e=>{if(e)return u.get(e)},b=(e,t)=>m(e)?.name??t??""},49229:(e,t,a)=>{a.d(t,{mb:()=>n});var r=a(17921);const n=(e,t=18)=>new r.Z(e).shiftedBy(-t).toString(10)},22645:(e,t,a)=>{a.d(t,{Aj:()=>l,VA:()=>u,_M:()=>d,hn:()=>m});var r=a(39671),n=a(59712);const o="https://benchmarks.pyth.network/v1/shims/tradingview/streaming",s=new Map,i=new Map;let c=!1;function d(e=3,t=3e3){c||fetch(o).then((a=>{const o=a.body.getReader();!function a(){o.read().then((({value:e,done:t})=>{c=!0,t?n.error("[stream] Streaming ended."):((new TextDecoder).decode(e).split("\n").forEach((e=>{const t=e.trim();if(t)try{!function(e){const{id:t,p:a,t:o}=e,c=a,d=1e3*o,l=Array.from(s.keys()).filter((e=>e===t));0!==l.length&&l.forEach((e=>{const t=s.get(e);t&&0!==t.length&&(t.forEach((e=>{const{lastDailyBar:t,subscriberUID:a}=e,o=a.split("_").pop(),s=function(e,t){return e+(0,r.Yy)(t)}(t.time,o);let i;d>=s||"1S"===o?(i={time:s,open:c,high:c,low:c,close:c},n.debug("[stream] Generate new bar",i),n.warn("new bar: prev time",new Date(t.time).toString(),"next time",new Date(s).toString())):i={...t,high:Math.max(t.high,c),low:Math.min(t.low,c),close:c},e.lastDailyBar=i,(0,e.handler.callback)(i)})),s.set(e,t))}));const u=Array.from(i.keys()).filter((e=>e===t.replace(/Crypto\.|\//g,"")));0!==u.length&&u.forEach((e=>{const t=i.get(e);t&&0!==t.length&&t.forEach((t=>{t.handler(e,c)}))}))}(JSON.parse(t))}catch(e){n.error("Error parsing JSON:",e.message)}})),a())})).catch((a=>{var r,o;c=!1,n.error("[stream] Error reading from stream:",a),o=t,(r=e)>0?(n.log(`[stream] Attempting to reconnect in ${o}ms...`),setTimeout((()=>{d(r-1,o)}),o)):(c=!1,n.error("[stream] Maximum reconnection attempts reached."))}))}()})).catch((e=>{n.error("[stream] Error fetching from the streaming endpoint:",e)}))}function l(e,t,a,r){const o={subscriberUID:a,lastDailyBar:r,handler:{id:a,callback:t}},i=s.get(e);i?(i.push(o),s.set(e,i)):s.set(e,[o]),n.log("[subscribeBars]: Subscribe to streaming. subscriberUID:",a,"channel",e)}function u(e){Array.from(s.keys()).forEach((t=>{const a=s.get(t)??[];s.set(t,a.filter((t=>t.subscriberUID!==e))),n.log("[unsubscribeBars]: Unsubscribe from streaming. subscriberUID:",e,"channel",t)}))}function m(e,t){const a={handler:t},r=i.get(e);return r?(r.push(a),i.set(e,r)):i.set(e,[a]),n.log("[subscribePrice]: Subscribe to streaming. ","channel",e),()=>{n.log("[unsubscribePrice]: Unsubscribe to streaming. ","channel",e);const t=i.get(e)??[];i.set(e,t.filter((e=>e!==a)))}}},15408:(e,t,a)=>{a.d(t,{Fc:()=>b,Gn:()=>d,PC:()=>m,XS:()=>c,ZC:()=>l,g8:()=>i,k6:()=>o,kD:()=>u,z:()=>n,zV:()=>s});var r=a(25048);const n=(0,a(76748).Ue)((e=>({initialed:!1,history:[],historyMap:{},appendHistory(t){e((0,r.ZP)((e=>{e.initialed=!0,e.history=[...e.history,...t.map((e=>e.hash))],e.historyMap={...e.historyMap,...t.reduce(((e,t)=>({...e,[t.hash]:t})),{})}})))},resetHistory(){e((0,r.ZP)((e=>{e.initialed=!1,e.history=[],e.historyMap={}})))},tab:"",setTab(t){e((0,r.ZP)((e=>{e.tab=t})))},predictionInitialed:!1,predictionLoading:!1,predictionHasMore:!0,predictionPage:0,predictions:[],predictionMap:{},setPredictionLoading(t){e((0,r.ZP)((e=>{e.predictionLoading=t})))},setPredictionHasMore(t){e((0,r.ZP)((e=>{e.predictionHasMore=t})))},refreshPrediction(t){e((0,r.ZP)((e=>{e.predictions=[...t.map((e=>e.positionHash))],e.predictionMap={...t.reduce(((e,t)=>({...e,[t.positionHash]:t})),{})},e.predictionInitialed=!0})))},resetPrediction(){e((0,r.ZP)((e=>{e.predictionInitialed=!1,e.predictionLoading=!1,e.predictionHasMore=!0,e.predictionPage=0,e.predictions=[],e.predictionMap={}})))}}))),o=()=>n((e=>e.history)),s=()=>n((e=>e.initialed)),i=()=>[n((e=>e.tab)),n((e=>e.setTab))],c=(e,t)=>n((a=>a.historyMap?.[e]?.[t])),d=()=>n((e=>e.predictions)),l=(e,t)=>n((a=>a.predictionMap?.[e]?.[t])),u=()=>n((e=>e.predictionInitialed)),m=()=>n((e=>e.predictionLoading)),b=()=>n((e=>e.predictionHasMore))},87354:(e,t,a)=>{a.d(t,{MM:()=>n,ac:()=>r.a,ak:()=>s,cS:()=>o,ey:()=>c,g_:()=>i});var r=a(19910);const n="CHART_PERP_ONCHAIN",o="CHART_PERP_ONCHAIN_MOBILE",s=1,i=3e4,c={lisUSD:"HAY","USDC.e":"USDC"}},19910:(e,t,a)=>{a.d(t,{a:()=>r});const r={SymbolList:"SymbolList",AllProducts:"AllProducts",DumbPositionList:"DumbPositionList",DumbHistoryList:"DumbHistoryList"}},2676:(e,t,a)=>{a.d(t,{QG:()=>i,Jg:()=>c.c,DH:()=>d.z,Bu:()=>l.t,At:()=>u.z,sP:()=>m.S,VT:()=>b.J,E4:()=>r.E});var r=a(29376),n=a(63003),o=a(54339),s=a(52983);const i=e=>{const t=(0,n.u)({abi:o.Wo,address:e,functionName:"decimals"});return(0,s.useMemo)((()=>t.data),[t.data])};var c=a(66779),d=a(44040),l=a(72200),u=a(97655),m=a(24722),b=a(48118)},14369:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(78659),n=a(63003),o=a(29376);const s=()=>{const e=(0,o.E)(),{isDumbMode:t}=(0,r.C)();return(0,n.u)({...e,functionName:"predictionPairs",args:[0n,255],scopeKey:"prediction-pairs",query:{staleTime:1/0,gcTime:1/0,enabled:t}})}},66779:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(63003),n=a(5571),o=a(52983),s=a(87354),i=a(29376);const c=new Map,d={pairBase:"",longQty:0n,shortQty:0n,lpAveragePrice:0n,fundFeeRate:0n},l=(e,t)=>{const a=(0,i.E)(),{data:l,...u}=(0,r.u)({...a,functionName:"getMarketInfo",args:[e],query:{enabled:Boolean(e),gcTime:s.g_,staleTime:s.g_},scopeKey:`getMarketInfo-${e}`});return(0,n.x)({enabled:t?.watch,onBlockNumber(){u.refetch()},pollingInterval:3e4}),(0,o.useMemo)((()=>(u.isFetched&&u.isSuccess&&l&&Object.keys(l).length&&c.set(e,l),{data:c.get(e)||d,...u})),[l,u,e])}},44040:(e,t,a)=>{a.d(t,{z:()=>s});var r=a(63003),n=a(52983),o=a(29376);const s=e=>{const t=(0,o.E)(),{data:a}=(0,r.u)({...t,functionName:"pairsV4",query:{staleTime:1/0},scopeKey:"pairs"});return(0,n.useMemo)((()=>(a||[]).find((t=>t.name.replace("/","")===e))?.base||""),[a,e])}},72200:(e,t,a)=>{a.d(t,{t:()=>m});var r=a(95386),n=a(63003),o=a(5571),s=a(49229),i=a(52983),c=a(87354),d=a(29376);const l=e=>(0,s.mb)(e.toString(),r.cB.usd),u=new Map,m=(e,t)=>{const a=(0,d.E)(),{data:r,...s}=(0,n.u)({...a,functionName:"getPairByBaseV4",args:[e],query:{enabled:Boolean(e),gcTime:c.g_,staleTime:c.g_},scopeKey:`getPairByBaseV4-${e}`});return(0,o.x)({enabled:t?.watch,onBlockNumber(){s.refetch()},pollingInterval:3e4}),(0,i.useMemo)((()=>{if(s.isFetched&&s.isSuccess&&r&&r?.leverageMargins){const t=r.leverageMargins.length,a={...r,leverageMargins:r.leverageMargins.map(((e,a)=>0===a?{...e,notionalUsdCap:l(e.notionalUsd),notionalUsdFloor:"0"}:a===t-1?{...e,notionalUsdCap:"Infinity",notionalUsdFloor:l(r.leverageMargins[t-1].notionalUsd)}:{...e,notionalUsdCap:l(r.leverageMargins[a+1].notionalUsd),notionalUsdFloor:l(e.notionalUsd)}))};u.set(e,a)}return{data:u.get(e)||{},...s}}),[r,s,e])}},97655:(e,t,a)=>{a.d(t,{a:()=>s,z:()=>i});var r=a(63003),n=a(54339),o=a(52983);const s={WBNB:"BNB",WETH:"ETH",BTCB:"BTC",WBTC:"BTC"},i=e=>{const t=(0,r.u)({abi:n.Wo,address:e,functionName:"symbol"});return(0,o.useMemo)((()=>t.data?s[t.data]||t.data:""),[t.data])}},48118:(e,t,a)=>{a.d(t,{J:()=>o});var r=a(63003),n=a(29376);const o=()=>{const e=(0,n.E)();return(0,r.u)({...e,functionName:"getTradingConfig"})}},85125:(e,t,a)=>{a.d(t,{Kn:()=>h,NE:()=>f,Qb:()=>g,j2:()=>p,sH:()=>y,xh:()=>b});var r=a(78659),n=a(23287),o=a(95588),s=a(66051),i=a(64038),c=a.n(i),d=a(52983),l=a(63469),u=a(16552),m=a(2676);const b=()=>{const{symbol:e,productMap:t}=(0,u.GS)(),{data:a=[]}=(0,m.sP)(),n=t[e],{degenPairSymbol:o}=n,{isDegenMode:s}=(0,r.C)(),i=((e,t)=>e&&0!==t.length&&t.find((t=>{const{name:a=""}=t;return a.replace(/\//g,"")===e}))||{})(e,a),{data:c}=(0,m.Jg)(i.base,{watch:!0}),{data:l}=(0,m.Bu)(i.base),b=(0,m.DH)(o?.replace("/","")||""),{data:p}=(0,m.Bu)(b),{data:g}=(0,m.Jg)(b,{watch:!0});return(0,d.useMemo)((()=>n?s&&p?{...n,...g,...p,degenPairBase:b}:{...n,...c,...l,degenPairBase:b}:{base:void 0,symbol:"",pair:"",tickSize:1e-7,close:"0",open:"0",symbolType:-1,degenPairSymbol:"",leverageMargins:void 0}),[l,g,b,p,s,c,n])},p=()=>{const{symbol:e,productMap:t}=(0,u.GS)(),a=t[e]||{symbol:"",pair:"",tickSize:1e-7,close:"0",open:"0",symbolType:-1,degenPairSymbol:""},{degenPairSymbol:r}=a,n=(0,m.DH)(r?.replace("/","")||"");return{...a,degenPairBase:n}},g=()=>{const e=(0,m.sP)(),{data:t=[]}=e,a=(0,d.useMemo)((()=>t?.map((e=>{const{name:t=""}=e;return t.replace(/\//g,"")}))),[t]);return(0,d.useMemo)((()=>({keys:a,...e})),[a,e])},h=()=>{const{symbolConfig:e}=(0,u.GS)();return e},y=e=>{const{symbol:t,productMap:a}=(0,u.GS)(),{baseAsset:r}=a?.[e||t]||{},o=(()=>{const{data:e}=(0,n.a)({queryKey:["ASSET_LOGO"],queryFn:s.B,refetchOnMount:!1});return(0,d.useMemo)((()=>c()(e,"assetCode")),[e])})()||{};return o?.[r]?.logoUrl||l.SW},f=e=>{const t=(0,o.x)(),a=h(),r=(0,d.useMemo)((()=>a[t]??[]),[a,t]);return Boolean(r.find((t=>t.symbolName===e))?.pythPriceFeedId)}},82521:(e,t,a)=>{a.d(t,{b:()=>b});var r=a(95588),n=a(38510),o=a(61525),s=a(37860),i=a(52983),c=a(15408),d=a(87354),l=a(87576),u=a(2547),m=a(59712);const b=e=>{const{dumb:t,dumbHistorySubgraph:a}=(0,u.B)(),{symbol:b,page:p=1,limit:g=10,chartRef:h}=e||{},y=(0,r.x)(),[f]=(0,c.g8)(),{address:B,isConnected:k}=(0,n.m)(),P=k&&Boolean(B)&&t,M=P&&(!!b||"Dumb"===f),N=(0,o.N)({initialPageParam:{page:p,limit:g},refetchInterval:!!M&&5e3,queryKey:[d.ac.DumbHistoryList,b,a],queryFn:async({pageParam:e={}})=>{const t=(e.page??p)-1,r=e.limit??g;return a?(0,l.J9)({account:B,chainId:y,symbol:b,page:t*r,limit:r}):(0,l.Qo)({account:B,chainId:y,symbol:b,page:t,limit:r})},getNextPageParam:(e,t)=>{if(e.success&&e.data.length===g)return{page:t.length+1,limit:g}}}),{refetch:v,isSuccess:w}=N;(0,i.useEffect)((()=>{if(w)try{b&&h?.current?.chart?.().refreshMarks()}catch(e){m.error(e)}}),[h,w,b]);const T=(0,s.O)({chainId:y,query:{enabled:P}});return(0,i.useEffect)((()=>{T&&v()}),[T,v]),N}},76922:(e,t,a)=>{a.d(t,{X:()=>m});var r=a(95588),n=a(38510),o=a(37860),s=a(23287),i=a(52983),c=a(87354),d=a(87576),l=a(2547),u=a(59712);const m=e=>{const{dumb:t,dumbPositionSubgraph:a}=(0,l.B)(),{symbol:m,chartRef:b}=e||{},p=(0,r.x)(),{address:g,isConnected:h}=(0,n.m)(),[y,f]=(0,i.useState)(!1),B=h&&Boolean(g)&&t,k=(0,o.O)({chainId:p}),{data:P,isLoading:M,refetch:N,isSuccess:v}=(0,s.a)({queryKey:[c.ac.DumbPositionList,m,a],queryFn:async()=>a?(0,d.J9)({account:g,chainId:p,symbol:m,limit:100,closeBlock:"0"}):(0,d.Sm)({account:g,chainId:p,symbol:m,limit:100}),enabled:B,refetchInterval:!!B&&(y?1e3:5e3)});return(0,i.useEffect)((()=>{if(v)try{m&&b?.current?.chart?.().refreshMarks()}catch(e){u.error(e)}}),[b,v,m]),(0,i.useEffect)((()=>{f(!!(B&&P?.data?.length>0))}),[P,B]),(0,i.useEffect)((()=>{k.data&&N()}),[k.data,N]),(0,i.useMemo)((()=>({data:P,isLoading:M,refetch:N})),[P,M,N])}},91359:(e,t,a)=>{a.d(t,{Ae:()=>s,dK:()=>i,eJ:()=>c});var r=a(52983),n=a(59712);const o=({lowPrice:e,lastPrice:t,highPrice:a,openPrice:r})=>{const n=+t-+r;return{lowPrice:e,lastPrice:t,highPrice:a,openPrice:r,difference:[n>=0?"+":"",(Number(r)?n/Number(r)*100:0).toFixed(2)].join(""),bigThan:(o=t,s=r,+o>=+s)};var o,s};function s(e,t,a){return Object.entries(e).reduce(((e,[r,n])=>Object.assign(e,{[r]:Object.assign(n,t[r],t[r]?o(t[r]):void 0,a[r])})),e)}function i(e){const{baseTicker:t}=(0,r.useMemo)((()=>({baseTicker:Object.keys(e).reduce(((t,a)=>{const{low:r,close:n,high:s,open:i,quoteAsset:c,...d}=e[a]||{},l=o({lowPrice:r,lastPrice:n,highPrice:s,openPrice:i});return t[a]=Object.assign(d,{quoteAsset:c,...l}),t}),{})})),[e]);return{baseTicker:t}}const c=e=>t=>{let a={stream:""};try{a=JSON.parse(t.data)}catch(e){n.error(e)}return a.stream===e}},82452:(e,t,a)=>{a.d(t,{q:()=>d,$:()=>c});var r=a(23287),n=a(66051),o=a(64038),s=a.n(o),i=a(52983);const c=()=>(0,r.a)({queryKey:["ASSET_DECIMAL"],queryFn:n._,refetchOnMount:!1}),d=()=>{const{data:e}=c();return(0,i.useMemo)((()=>s()(e,"assetCode")),[e])}},87576:(e,t,a)=>{a.d(t,{J9:()=>u,Qo:()=>d,Sm:()=>c});var r=a(84542),n=a(81105),o=a(33687),s=a(3421),i=a(59712);const c=async e=>{let t;try{t=await fetch(`${o.brokerConfig.apiBaseUrl}/bapi/futures/v1/public/future/apx/predictionPositionQuery?${n.stringify(e)}`).then((e=>e.json()))}catch(e){i.error(e),t={success:!1}}return t},d=async e=>{let t;try{t=await fetch(`${o.brokerConfig.apiBaseUrl}/bapi/futures/v1/public/future/apx/predictionHistoryQuery?${n.stringify(e)}`).then((e=>e.json()))}catch(e){i.error(e),t={success:!1}}return t},l=e=>{const t=e.isUp?Number(e.entryPrice)<Number(e.endPrice):Number(e.entryPrice)>Number(e.endPrice);let a=0;return 1e3*Number(e.settleTime)<Date.now()&&(a=1),1e3*Number(e.settleTime)<Date.now()&&e.closeFee&&(a=2),{closeFee:Number(e.closeFee),entryPrice:Number(e.entryPrice),executionPrice:Number(e.endPrice),executionTime:Number(e.settleTime),isLong:e.isUp,openFee:Number(e.openFee),pnl:t?Number(e.profit):-1*Number(e.profit),positionHash:e.id,principal:Number(e.betAmount),startTime:Number(e.startTime),symbol:e.predictionPair.name.replace("/",""),tokenIn:e.token.symbol,state:a}},u=async e=>{const t=`\n    query Predictions ($skip: Int, $first: Int, $user: String, $closeBlock: String) {\n      predictions(\n        first: $first\n        skip: $skip\n        orderBy: openBlock\n        orderDirection: desc\n        where: { user: $user${e.closeBlock?",closeBlock: $closeBlock":""} }\n      ) {\n        id\n        openTxHash\n        openBlock\n        startTime\n        predictionPair {\n          name\n        }\n        period\n        settleTime\n        isUp\n        token {\n          symbol\n        }\n        betAmount\n        betAmountUsd\n        entryPrice\n        openFee\n        broker {\n          name\n        }\n        closeTxHash\n        closeBlock\n        closeTime\n        endPrice\n        closeFee\n        profit\n      }\n    }\n  `,a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:t,variables:{user:e.account,skip:e.page,first:e.limit,closeBlock:e.closeBlock}}),next:{revalidate:0}},n=(0,r.pT)(e.chainId),o=(0,s.BH)(n?.apiNetwork||"bnb");try{const e=await fetch(o,a).then((e=>e.json()));return{data:e.data?e.data.predictions.map(l):[],success:!0}}catch(e){return i.error(e),{success:!1,message:e.message,data:[]}}}},2547:(e,t,a)=>{a.d(t,{B:()=>b});var r=a(39710),n=a(51370),o=a(26914),s=a(13391),i=a(55945),c=a(45053),d=a(20399),l=a(5911),u=a(95588);const m=new Map([[r.e.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[n.d.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[o.y.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[s.Z.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[i.V.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[c.a.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!1,dumbPositionSubgraph:!1}],[d.u.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}],[l.J.id,{degen:!0,dumb:!1,dumbHistorySubgraph:!0,dumbPositionSubgraph:!0}]]),b=()=>{const e=(0,u.x)();return m.get(e)}}}]);