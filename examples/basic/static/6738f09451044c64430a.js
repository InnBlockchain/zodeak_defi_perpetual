"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[2096],{70326:(e,t,a)=>{a.d(t,{D:()=>A});var n=a(11273),i=a(94043),r=a(58395),s=a(27618),l=a(89339),o=a(33740),c=a(76933),m=a(87514),u=a(38510),d=a(7279),f=a(37860),p=a(9125),h=a(57055),g=a(71796),E=a(63859),x=a(63003),b=a(54339),y=a(17921),v=a(52983),N=a(7061),P=a(38880),w=a(37444),C=a(95386),I=a(42249),O=a(50855),_=a(37672),S=a(79492),L=a(87405);const k=({approve:e,getI18n:t,children:a,refetch:n,disabled:i})=>{const[r,s]=(0,v.useState)(!1),[o,c]=(0,v.useState)(!1),m=(0,S.Z)(),u=!(!r||o)||i,d=(0,v.useCallback)((async()=>{s(!0),c(!1);try{if(e){const a=await e();await(0,L.As)({getI18n:t,hash:a,config:m})}}catch(e){c(!0)}n(),s(!1)}),[n,e,t,m]);return(0,v.useMemo)((()=>v.createElement(l.z,{type:"button",className:"w-full h-full",onClick:d,disabled:u||r},a)),[u,a,d,r])},D=({label:e,value:t,className:a,isError:n=!1})=>(0,v.useMemo)((()=>v.createElement("div",{className:(0,s.cn)("flex flex-col flex-[1]",a)},v.createElement("div",{className:"text-caption text-t-third"},e),v.createElement("div",{className:(0,s.cn)("text-t-primary text-subtitle2",{"text-t-error":n})},t))),[e,a,t,n]),M=[{key:"0.25",label:"25%"},{key:"0.5",label:"50%"},{key:".75",label:"75%"},{key:"1",label:"100%"}],F=({hash:e,onClose:t})=>{const a=(0,I.h)(),{getI18n:n,usePositionAddMargin:o,onChainPerpContractAddress:c}=(0,v.useContext)(O.Z),[_,S]=(0,v.useState)(-1),[L,F]=(0,v.useState)("0"),[A,T]=(0,v.useState)(""),{symbol:B,side:R,marginToken:q,marginQtyPrecision:z,pricePrecision:Z,formatNumber:G,calcMargin:U,calcMarginRatio:W,calcMaxMarginRatio:K,calcInitialMargin:V,calcMaxMargin:Q,calcLiqPrice:j,useTokenApprove:H,useContractAddMargin:$,isLong:J,calcLeverage:X}=o(e),{address:Y,chain:ee}=(0,u.m)(),te=C.KF.has(q)?"":q,{data:ae}=(0,d.d)({address:te||void 0}),{decimals:ne=ee?.nativeCurrency.decimals,symbol:ie=(0,C.De)(ee?.nativeCurrency.symbol)}=ae||{},{data:re}=(0,f.O)({watch:!0}),{queryKey:se,formatted:le}=(0,p.m)({address:Y,token:te,query:{enabled:Boolean(te),gcTime:C.g_}}),oe=(0,h.K)({address:Y,query:{enabled:!te}}),ce=(0,g.NL)();(0,v.useEffect)((()=>{re&&ce.invalidateQueries({queryKey:te?se:oe.queryKey})}),[re,te,oe.queryKey,ce,se]);const{approve:me}=H(te,(0,E.v)(L,ne??0)),{addMargin:ue}=$(),de=(0,v.useMemo)((()=>te?new y.Z(le??0).toFixed(z,y.Z.ROUND_DOWN):new y.Z(oe.data?.formatted??0).toFixed(z,y.Z.ROUND_DOWN)),[le,z,te,oe.data?.formatted]),{data:fe,refetch:pe}=(0,x.u)({address:te,abi:b.Wo,functionName:"allowance",args:[Y,c],query:{enabled:Boolean(te)&&Boolean(Y)&&Boolean(c)}}),he=(0,v.useCallback)((()=>t()),[t]),ge=(0,v.useCallback)((e=>{F(e||"0"),S(-1)}),[]),Ee=(0,v.useCallback)(((e,t)=>{S(e),F(new y.Z(t).multipliedBy(de).toFixed(z,y.Z.ROUND_DOWN))}),[de,z]),xe=(0,v.useMemo)((()=>new y.Z(de).isLessThanOrEqualTo(0)||new y.Z(de).isLessThan(L)?{label:n("userinfo-dialog-margin-insufficient-balance","Insufficient balance"),disabled:!0}:{label:v.createElement("div",{className:"flex items-center"},v.createElement(i.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),v.createElement("span",null,n("userinfo-dialog-margin-button-confirm","Add Margin"))),disabled:new y.Z(L).isLessThanOrEqualTo(0)}),[n,L,de]),be=(0,v.useMemo)((()=>V(L).toString()),[V,L]),ye=(0,v.useMemo)((()=>U(L).toString()),[U,L]),ve=(0,v.useMemo)((()=>X(ye).toNumber()),[X,ye]),Ne=(0,v.useMemo)((()=>Q()),[Q]),Pe=(0,v.useMemo)((()=>W(L).toString()),[W,L]),we=(0,v.useMemo)((()=>K()),[K]),Ce=(0,v.useMemo)((()=>we.lt(Pe||0)),[we,Pe]),Ie=(0,v.useMemo)((()=>{const e=j(be);return e.isNegative()?"-":G(e.toString(),Z)}),[j,be,G,Z]),Oe=a[ie]||ie,_e=(0,v.useCallback)((()=>{ue({hash:e,amount:(0,m.r)(L,ne),marginToken:te,closeModalCallBack:he,symbol:B,decimals:ne,isLong:J,leverage:ve,tokenName:ie})}),[ue,ve,he,e,J,ne,L,ie,te,B]);return(0,v.useMemo)((()=>v.createElement("div",{className:"[&_.add-margin-input_>_div]:!rounded-none"},v.createElement("div",{className:"flex items-center sm:hidden mb-[16px]"},v.createElement("div",{className:"flex-[1] text-t-primary text-subtitle1 text-center"},n("userinfo-dialog-margin-add-margin","Add Margin")),v.createElement(r.E,{onClick:he,className:"w-5 h-5 text-[20px] text-t-third cursor-pointer absolute right-4"})),v.createElement("div",{className:"flex flex-col"},v.createElement("div",{className:"flex flex-row items-center justify-between"},v.createElement("div",{className:"text-t-primary text-subtitle2"},B," ",R),v.createElement(r.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:he})),v.createElement("div",{className:"flex justify-between my-[16px]"},v.createElement(D,{className:"text-left",isError:Ce,label:n("userinfo-positions-column-marginRatio","Margin ratio"),value:(0,N.e9)(Pe,{decimals:2})}),v.createElement(D,{className:"text-left",label:n("userinfo-positions-column-margin","Margin"),value:`${G(ye,z)} ${Oe}`}),v.createElement(D,{className:"text-right",label:n("userinfo-positions-column-liquidPriceV2","Liq. Price"),value:Ie})),v.createElement("div",{className:"rounded p-4 flex mb-4 flex-col bg-interactive-interactive01 order-form-card"},v.createElement("div",{className:"flex flex-row justify-between mb-2"},v.createElement("div",{className:"text-t-primary text-subtitle2"},n("userinfo-dialog-margin-add-margin","Add Margin")),v.createElement("div",{className:"text-t-secondary text-caption"},n("userinfo-dialog-margin-user-avail",{defaultValue:"Available : {{available}} {{margin}}",available:de,margin:Oe}))),v.createElement(P.Q,{className:`add-margin-input h-[40px] mt-[4px] rounded-0 ${A?"border-interactive-primary":"!border-t-third"} border-t-0 border-x-0 [&>input]:text-left`,precision:z,maxLength:19,boxProps:{className:(0,s.cn)("flex pb-0.5 rounded-none border-x-0 border-t-0 border-b border-t-third w-full h-10 [&_input]:text-left [&_input]:px-0 [&_.bn-input-suffix]:!mr-0",{"border-t-error":Ce})},value:L,onChange:ge,onFocus:()=>T("focus"),onBlur:()=>T(""),suffix:v.createElement("div",{className:"text-body2 text-t-primary"},Oe)})),v.createElement(w.W,{activeIndex:_,options:M,onChange:Ee}),Ce&&v.createElement("p",{className:"text-t-error text-caption mt-4"},n("userinfo-dialog-margin-maximum-margin-ratio-warn",{defaultValue:"the maximum Margin ratio for {{symbol}} is {{maxMarginRatio}} , so it is recommended to input an additional margin below {{maxMargin}} {{marginSymbol}}.",maxMarginRatio:(0,N.e9)(we.toString(),{decimals:2}),symbol:B,maxMargin:G(Ne.toString(),z,{roundMode:1}),marginSymbol:Oe})),v.createElement("div",{className:"flex mt-8 h-10"},te&&fe&&!new y.Z((0,m.r)(L,ne)).isLessThanOrEqualTo(fe.toString())&&new y.Z(L).isLessThanOrEqualTo(de)?v.createElement(k,{approve:me,getI18n:n,refetch:pe},n("userinfo-dialog-margin-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:Oe})):v.createElement(l.z,{className:"w-full text-subtitle2",disabled:xe.disabled||Ce,onClick:_e},xe.label))))),[n,he,B,R,G,Pe,ye,z,Oe,Ie,de,A,we,L,ge,_,Ee,te,fe,ne,me,pe,xe.disabled,xe.label,_e,Ce,Ne])},A=()=>{const[e,t]=(0,v.useState)(""),{isMobile:a}=(0,n.F)(),i=(0,v.useCallback)((()=>{t("")}),[]);return(0,v.useEffect)((()=>_.ee.on("MODAL_ADD_MARGIN_OPEN",(({hash:e})=>{t(e)}))),[]),(0,v.useEffect)((()=>_.ee.on("MODAL_ADD_MARGIN_CLOSE",(()=>{t("")}))),[]),(0,v.useMemo)((()=>e?a?v.createElement(o.yo,{open:!0},v.createElement(o.ue,{side:"bottom",className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg",onPointerDownOutside:i},v.createElement(F,{hash:e,onClose:i}))):v.createElement(c.Vq,{open:!0},v.createElement(c.PK,null,v.createElement(c.cZ,{className:"w-full sm:w-[320px] p-4 min-h-[384px] sm:min-h-[332px]",onPointerDownOutside:i},v.createElement(F,{hash:e,onClose:i})))):null),[e,a,i])}},80291:(e,t,a)=>{a.d(t,{n:()=>c});var n=a(76933),i=a(52983);const r=e=>i.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 96 96",...e},i.createElement("g",{filter:"url(#GeneralWarning_svg__filter0_i)"},i.createElement("rect",{width:65,height:65,x:8,y:9,fill:"url(#GeneralWarning_svg__paint0_linear)",rx:10})),i.createElement("g",{filter:"url(#GeneralWarning_svg__filter1_i)"},i.createElement("rect",{width:58,height:58,x:30,y:31,fill:"#F1F8FF",fillOpacity:.5,rx:8})),i.createElement("g",{filter:"url(#GeneralWarning_svg__filter2_di)"},i.createElement("rect",{width:38,height:38,x:40,y:41,fill:"#fff",rx:19})),i.createElement("g",{filter:"url(#GeneralWarning_svg__filter3_d)"},i.createElement("path",{fill:"#F0B90B",fillRule:"evenodd",d:"M62 51c0-1.105-1-3-3-3s-3 1.895-3 3l1 13a2 2 0 104 0l1-13zm-3 21a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})),i.createElement("defs",null,i.createElement("filter",{id:"GeneralWarning_svg__filter0_i",width:66,height:66,x:8,y:9,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"GeneralWarning_svg__filter1_i",width:59,height:59,x:30,y:31,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:1}),i.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"GeneralWarning_svg__filter2_di",width:50,height:50,x:36,y:37,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:2,dy:2}),i.createElement("feGaussianBlur",{stdDeviation:3}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0.941667 0 0 0 0 0.797749 0 0 0 0 0.427674 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:1,dy:1}),i.createElement("feGaussianBlur",{stdDeviation:.5}),i.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0"}),i.createElement("feBlend",{in2:"shape",result:"effect2_innerShadow"})),i.createElement("filter",{id:"GeneralWarning_svg__filter3_d",width:14,height:32,x:54,y:46,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:2,dy:2}),i.createElement("feGaussianBlur",{stdDeviation:2}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 0.811167 0 0 0 0 0.141667 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),i.createElement("linearGradient",{id:"GeneralWarning_svg__paint0_linear",x1:13.417,x2:60.591,y1:9,y2:74,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFD37E"}),i.createElement("stop",{offset:1,stopColor:"#F0B90B"}))));var s=a(89339),l=a(50855),o=a(37672);const c=()=>{const{getI18n:e,usePositions:t}=(0,i.useContext)(l.Z),a=t(),[c,m]=(0,i.useState)(!1),u=(0,i.useCallback)((()=>{m(!1)}),[]),d=(0,i.useCallback)((()=>m(!0)),[]),f=(0,i.useCallback)((()=>{o.ee.emit("POSITION_ALL_CLOSE",void 0),u()}),[u]);return(0,i.useEffect)((()=>(o.ee.on("MODAL_CLOSE_ALL_POSITION",d),o.ee.on("MODAL_CLOSE_ALL_POSITION_CLOSE",u),()=>{o.ee.off("MODAL_CLOSE_ALL_POSITION",d),o.ee.off("MODAL_CLOSE_ALL_POSITION_CLOSE",u)})),[u,d]),i.createElement(n.Vq,{open:c},i.createElement(n.PK,null,i.createElement(n.cZ,{className:"!w-[298px] !min-h-[280px] p-6",onPointerDownOutside:u},i.createElement("div",{className:"flex flex-col"},i.createElement("div",{className:"flex w-full justify-center items-center mb-4"},i.createElement(r,{width:60,height:60})),i.createElement("div",{className:"flex w-full justify-center items-center mb-2"},i.createElement("div",{className:"text-subtitle1 text-t-primary"},e("userinfo-positions-close-all-position-title",{defaultValue:"Closing all positions"}))),i.createElement("div",{className:"flex w-full justify-center items-center mb-6"},i.createElement("div",{className:"text-body2 text-t-third text-center"},e("userinfo-positions-close-all-position-desc-v2",{defaultValue:"Closing all positions will cancel all open orders. And the current {{number}} positions will be filled with market orders.",number:a.length}))),i.createElement("div",{className:"flex w-full justify-between items-center"},i.createElement(s.z,{className:"text-subtitle2 flex-[1] j-10 !mr-3",onClick:u,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),i.createElement(s.z,{className:"text-subtitle2 flex-[1] h-10",onClick:f},i.createElement("div",{className:"flex items-center"},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"}))))))))}},48837:(e,t,a)=>{a.d(t,{t:()=>x});var n=a(8429),i=a(76933),r=a(89663),s=a(25368),l=a(52983),o=a(24757),c=a(50855),m=a(37672),u=a(89339),d=a(94043);const f=l.forwardRef((({getI18n:e,onClose:t,onSubmit:a,showMinTp:n,minTp:r},s)=>l.createElement(i.cZ,{className:"!w-[298px] !min-h-[186px]",onPointerDownOutside:t,ref:s},l.createElement("div",{className:"flex flex-col"},l.createElement("div",{className:"flex w-full justify-between h-[38px] items-center"},l.createElement("div",{className:"text-t-primary text-subtitle1"},e("userinfo-positions-close-position-title",{defaultValue:"Close Position"})),l.createElement(i.GG,{onClick:t,className:"[&_svg]:w-5 [&_svg]:h-5 [&_svg]:text-[20px]"})),l.createElement("div",{className:"flex-1 pt-4 pb-10"},n?l.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:r})):null,l.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),l.createElement("div",{className:"flex w-full justify-between items-center"},l.createElement(u.z,{className:"text-subtitle2 flex-[1] j-10 !mr-2",onClick:t,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),l.createElement(u.z,{className:"text-subtitle2 flex-[1] h-10",onClick:a},l.createElement("div",{className:"flex items-center"},l.createElement(d.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),l.createElement("span",null,e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))))));var p,h=a(69291),g=a(95386);!function(e){e[e.FIXED=0]="FIXED",e[e.ONE_PERCENT_DEPTH=1]="ONE_PERCENT_DEPTH",e[e.NET_POSITION=2]="NET_POSITION",e[e.DEGEN=3]="DEGEN"}(p||(p={}));const E=({getI18n:e,onClose:t,onSubmit:a,markPrice:n,closePrice:r,ROIColor:s,ROI:o,spread:c})=>l.createElement(i.cZ,{className:"w-full max-w-[360px] p-6",onEscapeKeyDown:()=>t(),onPointerDownOutside:()=>t()},l.createElement("h2",{className:"text-headline3 text-t-primary mb-3 text-center"},e("orderForm-high-spread-confirm-dialog-title","High Spread Notice")),l.createElement("p",{className:"text-caption1 mb-2 text-center text-t-third"},e("orderForm-high-spread-confirm-dialog-desc","This trade may result in significant price impact due to a substantial disparity in open interest between long and short positions.Please be aware.")),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-mark-price","Mark price")),l.createElement("div",{className:"text-subtitle2 text-t-primary"},n)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-close-price","Est. Close price")),l.createElement("div",{className:"text-subtitle2 text-t-primary"},r)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-roi","Est. ROI")),l.createElement("div",{className:`text-subtitle2 ${s}`},o)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e(" orderForm-high-spread-confirm-price-spread","Price spread")),l.createElement("div",{className:"text-subtitle2 text-t-sell"},c)),l.createElement(u.z,{type:"button",onClick:a,className:"block w-full mt-6"},e("orderForm-high-spread-confirm-close-button","Continue to close"))),x=()=>{const{getI18n:e,useColumnSymbol:t,useColumnPNL:a,useLeverage:u,usePositionDetail:d,useSpread:x}=(0,l.useContext)(c.Z),[b,y]=(0,l.useState)(""),{symbolType:v,symbol:N,isLong:P}=t(b),{ROIInNumber:w,isROINegative:C}=a(b),I=u(b),{min:O}=(0,o.Fe)(I),{isDegenMode:_}=(0,n.L)(v),{usePositionDetailPricePrecision:S}=d(),L=S(N),{entryPrice:k,marketPrice:D,qty:M,margin:F,longQty:A,shortQty:T,fundingFee:B,holdingFee:R,slippageConfig:q}=x(b),z=(({marketPrice:e,qty:t})=>e*t/10n**BigInt(g.cB.qty))({marketPrice:D,qty:M}),Z=(({isLong:e,size:t,longQty:a,shortQty:n,slippageConfig:i,marketPrice:r})=>{if(0n===t)return 0n;if(i?.slippageType===p.FIXED)return(0,h.f)(`${e?i?.slippageLongP:i?.slippageShortP}`)/10n**4n;const l=(({longQty:e,marketPrice:t})=>e*t)({longQty:a*10n**8n,marketPrice:r})/10n**18n,o=(({shortQty:e,marketPrice:t})=>e*t)({shortQty:n*10n**8n,marketPrice:r})/10n**18n;if(i?.slippageType===p.ONE_PERCENT_DEPTH){if(!t||!a)return 0n;if(0n===i.onePercentDepthAboveUsd)return 0n;const n=(e?(o+t)/i.onePercentDepthBelowUsd:(l+t)/i.onePercentDepthAboveUsd)*10n**18n;return(0,h.f)(""+Math.ceil(1e4*Number((0,s.d)(n)))/1e4)}if(i?.slippageType===p.NET_POSITION){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,r=BigInt(e?i?.slippageShortP:i?.slippageLongP)*10n**(18n-4n),s=(e?t-l+o:t-o+l)*10n**18n/n;return s>r?s:r}if(i?.slippageType===p.DEGEN){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,r=(0,h.f)("10000000000000000000000"),s=(e?t+o-r:t+l-r)*10n**18n/n;return s>0n?s:0n}return BigInt(0)})({isLong:P,size:z,longQty:A,shortQty:T,slippageConfig:q,marketPrice:D}),G=(({isLong:e,marketPrice:t,spread:a})=>e?t*(10n**18n-a)/10n**18n:t*(10n**18n+a)/10n**18n)({isLong:P,marketPrice:D,spread:Z}),U=(({qty:e,entryPrice:t,closePrice:a,isLong:n,fundingFee:i,holdingFee:r})=>{if(0n===a)return 0n;const s=i-r;return n?(a-t)*e/10n**BigInt(g.cB.qty)+s:(t-a)*e/10n**BigInt(g.cB.qty)+s})({isLong:P,qty:M,entryPrice:k,closePrice:G,fundingFee:B,holdingFee:R}),W=(({pnl:e,margin:t})=>0n===e||0n===t?0n:e/t)({pnl:U,margin:F}),K=0n===D?"-":(0,r.uf)((0,s.d)(D),L),V=0n===G?"-":(0,r.uf)((0,s.d)(G),L),Q=0n===W?"-":`${(0,r.uf)((0,s.d)(100n*W),2)}%`,j=`${(0,r.uf)((0,s.d)(100n*Z),2)}%`,H=(({size:e,pnl:t,margin:a})=>{if(0n===a)return 0n;const n=e*(0,h.f)("4")/10n**18n/10n**18n,i=a*10n**18n+t/10n**18n;return 0n!==i&&0n!==n?i/n:0n})({size:z,margin:F,pnl:U}),$=(0,l.useCallback)((()=>{y("")}),[]),J=(0,l.useCallback)((({hash:e})=>{y(e)}),[]),X=(0,l.useCallback)((()=>{m.ee.emit("POSITION_CLOSE",{hash:b,symbol:N,isLong:P,leverage:I}),$()}),[b,P,I,$,N]);return(0,l.useEffect)((()=>(m.ee.on("MODAL_CLOSE_POSITION",J),m.ee.on("MODAL_CLOSE_POSITION_CLOSE",$),()=>{m.ee.off("MODAL_CLOSE_POSITION",J),m.ee.off("MODAL_CLOSE_POSITION_CLOSE",$)})),[$,J]),l.createElement(i.Vq,{open:Boolean(b)},l.createElement(i.PK,null,b?0n!==H&&Z>=H?l.createElement(E,{getI18n:e,onClose:$,onSubmit:X,markPrice:K,closePrice:V,ROIColor:0n===W?"text-t-primary":W>0?"text-t-buy":"text-t-sell",ROI:Q,spread:j}):l.createElement(f,{getI18n:e,onClose:$,onSubmit:X,showMinTp:_&&!C&&w<O,minTp:O}):null))}},66099:(e,t,a)=>{a.d(t,{F:()=>L});var n=a(11273),i=a(58395),r=a(5837),s=a(33740),l=a(76933),o=a(17921),c=a(52983),m=a(49506),u=a(49382),d=a(26997);const f=({hash:e,onClose:t})=>{const{getI18n:a,usePositionDetail:n}=(0,c.useContext)(d.C),{usePositionDetailSymbol:r}=n(),{symbol:s,isLong:l,symbolName:o}=r(e);return(0,c.useMemo)((()=>c.createElement("div",{className:"items-center flex justify-between mb-4"},c.createElement("div",{className:"text-subtitle1 text-t-primary font-[500]"},o||s," ",l?a("orderForm-long","Long"):a("orderForm-short","Short")),c.createElement(i.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-4",onClick:t}))),[a,l,t,s,o])},p=({hash:e})=>{const{getI18n:t,usePositionDetail:a,staticHost:n}=(0,c.useContext)(d.C),{usePositionDetailLeverage:i,usePositionDetailPNLROI:r,usePositionDetailSymbol:s}=a(),{isPNLNegative:l,isPNLPositive:o}=r(e),{symbolType:f}=s(e),p=i(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-[2px]"},p,c.createElement(u.b,{isPNLNegative:l,isPNLPositive:o,staticHost:n,symbolType:f})))},h=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailInitialMargin:n}=a(),i=n(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:r,showLabelSx:!0},i)},g=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailQtyAndSize:n,usePositionDetailPair:i}=a(),{baseAsset:r}=i(e),{size:s,qty:l}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},l," ",r," ( ≈ ",s," USD )")},E=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailEntryPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},i," USD")},x=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailLiquidPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-estLiquidPrice","Est. Liquid Price")},i," USD")},b=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailLiqLostRate:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new o.Z(i).multipliedBy(100).toFixed(2)}%`)},y=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailFundingFee:n}=a(),{fundingFee:i,isFundingFeeNegative:r}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},v=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailPNLROI:n}=a(),{PNL:i,isPNLNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips01","Unrealized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips02","Long : Unrealized PNL = (Mark Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips03","Short : Unrealized PNL = (Entry Price - Mark Price ) * Qty + Funding Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedPnl","Unrealized PNL"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},N=({hash:e})=>{const{getI18n:t,usePositionDetail:a,enableShare:n,ee:i}=(0,c.useContext)(d.C),{usePositionDetailPNLROI:s}=a(),{ROI:l,isROINegative:o}=s(e),u=(0,c.useCallback)((()=>i.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[i,e]),f=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedROI-tips01","Unrealized ROI = Unrealized PNL / Initial margin * 100%")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedROI","Unrealized ROI"),tips:f,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:o?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},l),n&&c.createElement("div",null,c.createElement(r.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:u})))},P=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailOpenFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},i)},w=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailExecutionFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},i)},C=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailNetProfit:n}=a(),{netProfit:i,isNetProfitNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},I=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailDuration:n}=a(),{time:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-time","Time")},i)},O=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailDuration:n}=a(),{duration:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-duration","Duration")},i)},_=({hash:e})=>c.createElement("div",{className:"flex gap-6 flex-col sm:flex-row max-h-[80vh] sm:max-h-[unset] overflow-auto sm:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4"},c.createElement(p,{hash:e}),c.createElement(h,{hash:e}),c.createElement(g,{hash:e}),c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(b,{hash:e}),c.createElement(y,{hash:e}),c.createElement(v,{hash:e}),c.createElement(N,{hash:e})),c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-4 h-[max-content]"},c.createElement(P,{hash:e}),c.createElement(w,{hash:e}),c.createElement(C,{hash:e}),c.createElement("div",{className:"border-b-border-line border-b border-solid"}),c.createElement(I,{hash:e}),c.createElement(O,{hash:e}))),S=({hash:e,onClose:t})=>(0,c.useMemo)((()=>c.createElement(c.Fragment,null,c.createElement(f,{hash:e,onClose:t}),c.createElement(_,{hash:e}))),[e,t]),L=()=>{const[e,t]=(0,c.useState)(""),{ee:a,usePositionDetail:i}=(0,c.useContext)(d.C),{onPositionDetailOpen:r,useIsDegenMode:o}=i(),m=o(),{isMobile:u}=(0,n.F)(),f=(0,c.useCallback)((()=>{t("")}),[]),p=(0,c.useCallback)((({hash:e})=>{r?.(m(e)),t(e)}),[m,r]);return(0,c.useEffect)((()=>(a.on("MODAL_POSITION_DETAIL_CLOSE",f),a.on("MODAL_POSITION_DETAIL_OPEN",p),()=>{a.off("MODAL_POSITION_DETAIL_CLOSE",f),a.off("MODAL_POSITION_DETAIL_OPEN",p)})),[a,f,p]),u?c.createElement(s.yo,{open:Boolean(e)},c.createElement(s.ue,{side:"bottom",className:"w-full border-none px-4 py-6 bg-interactive-interactiveBg",onPointerDownOutside:f},c.createElement(S,{hash:e,onClose:f}))):c.createElement(l.Vq,{open:Boolean(e)},c.createElement(l.PK,null,c.createElement(l.cZ,{className:"w-full sm:w-[750px] sm:min-w-[750px] p-4 sm:min-h-[332px]",onPointerDownOutside:f},c.createElement(S,{hash:e,onClose:f}))))}},26130:(e,t,a)=>{a.d(t,{m:()=>v});var n=a(11273),i=a(96336),r=a(57255),s=a(89663),l=a(76126),o=a(47231),c=a(38510),m=a(95588),u=a(84542),d=a(52983),f=a(82210),p=a(86364),h=a(12149),g=a(61239),E=a(26997),x=a(59712);const b={markPrice:"-",ROI:"-",PNL:"-"},y=({hash:e,checked:t,onClose:a,snapshotRef:r,onCheckedChange:l,copy:o,download:m})=>{const[u,h]=(0,d.useState)(b),{locale:x,getI18n:y,useMarkPrice:v,usePositionDetail:N,useTheme:P,staticHost:w,siteHost:C}=(0,d.useContext)(E.C),{usePositionDetailSymbol:I,usePositionDetailLeverage:O,usePositionDetailPNLROI:_,usePositionDetailEntryPrice:S,usePositionDetailPricePrecision:L}=N(),{isLight:k}=P(),{PNLFormatted:D,ROI:M,marginSymbol:F}=_(e),{symbol:A,isLong:T}=I(e),B=v(A),R=O(e),q=S(e),z=L(A),{address:Z}=(0,c.m)(),{isMobile:G}=(0,n.F)(),U=(0,g.e)({staticHost:w});return(0,d.useEffect)((()=>{void 0!==B&&u.markPrice===b.markPrice&&h({markPrice:B,ROI:M,PNL:D})}),[D,M,B]),d.createElement("div",{className:"flex flex-col"},a&&d.createElement(i.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1]",onClick:a}),d.createElement(f.L,{data:{hash:e,locale:x||"en",symbol:A,tokenInSymbol:F,closeTime:0,side:T?"LONG":"SHORT",leverage:R,markPrice:Number(u.markPrice)>0?(0,s.uf)(u.markPrice,z):"-",entryPrice:q,closePrice:"-",PNL:u.PNL,ROI:u.ROI,isLightTheme:k,staticResource:U,SITE_HOST:C,userAddress:Z,getI18n:y,sharePNL:t,snapshotRef:r}}),!G&&d.createElement(d.Fragment,null,d.createElement(p.k,{className:"pt-[12px] pb-[24px]",getI18n:y,checked:t,onCheckedChange:l}),d.createElement(p.n,{getI18n:y,copy:o,download:m})))},v=()=>{const e=(0,m.x)(),t=(0,u.pT)(e),{ee:a,getI18n:i,locale:s}=(0,d.useContext)(E.C),[c,f]=(0,d.useState)(""),[p,b]=(0,d.useState)(!1),[v,N]=(0,d.useState)(!1),{isMobile:P}=(0,n.F)(),w=(0,d.useRef)(),C=(0,d.useMemo)((()=>(0,g.O)({network:t?.apiNetwork,locale:s,hash:c,sharePNL:v})),[t?.apiNetwork,s,c,v]),I=(0,d.useCallback)((async()=>{try{await(0,l.v)(C),P||r.A.success(i("share-copy-message","Copy Successfully"))}catch(e){x.error(e)}}),[i,P,C]),O=(0,d.useCallback)((async()=>{w.current&&(0,o.Q)({el:w.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}),[]),_=(0,d.useCallback)((e=>{"boolean"==typeof e&&N(e)}),[]),S=(0,d.useCallback)((()=>{f("")}),[]);return(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{f(e),b(t)}))),[a]),(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_CLOSE",(()=>{f(""),b(!1)}))),[a]),(0,d.useMemo)((()=>c?P?d.createElement(h.V,{hash:c,onClose:S,getI18n:i,checked:v,onCheckedChange:_,copy:I,download:O},d.createElement(y,{hash:c,checked:v,snapshotRef:w})):d.createElement(h.t,{onClose:S,overlay:p},d.createElement(y,{hash:c,checked:v,onClose:S,onCheckedChange:_,copy:I,download:O,snapshotRef:w})):null),[I,O,i,c,P,_,S,p,v])}},26997:(e,t,a)=>{a.d(t,{C:()=>n});const n=a(52983).createContext({})},50855:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(52983).createContext({})},37672:(e,t,a)=>{a.d(t,{ee:()=>n});const n=new(a(13565).v)},7061:(e,t,a)=>{a.d(t,{FB:()=>m,Y0:()=>c,e9:()=>o});var n=a(89663),i=a(17921);const r=2,s="-%",l=1,o=(e,t)=>{let a=new i.Z(e);const{positiveSign:n=!1,decimals:o=r,customNaNDisplay:c=s,allowNegative:m=!0,rm:u=l}=t||{};if(a.isNaN())return c;m||(a=a.abs());const d=a.shiftedBy(2).dp(o,u).toFormat({suffix:"%",decimalSeparator:"."}).toString();return n?`+${d}`:d},c=(e,t,a=3)=>(0,n.yd)(e,t).replace((0,n.rv)(t,a),"$&,"),m=(e,t,a=3)=>c(e,t,a).replace(/\.?[0,]+$/,"")},9125:(e,t,a)=>{a.d(t,{m:()=>l});var n=a(52983),i=a(54339),r=a(90546),s=a(72322);const l=e=>{const{data:t,isLoading:a,refetch:l,isError:o,queryKey:c}=(0,r.N)({allowFailure:!1,contracts:[{address:e.token,abi:i.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"decimals",chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"symbol",chainId:e.chainId}],scopeKey:e.scopeKey,query:e.query}),[m,u,d]=t||[];return(0,n.useMemo)((()=>({data:m,decimals:u,symbol:d,formatted:(0,s.b)(m??0n,u??0),isLoading:a,refetch:l,isError:o,queryKey:c})),[m,u,d,a,l,o,c])}},83130:(e,t,a)=>{a.d(t,{o:()=>i});var n=a(52983);const i=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...e},n.createElement("path",{d:"M12 6a1 1 0 00-1 1v4H7a1 1 0 100 2h4v4a1 1 0 102 0v-4h4a1 1 0 100-2h-4V7a1 1 0 00-1-1z"}),n.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))},57610:(e,t,a)=>{a.d(t,{W:()=>i});var n=a(85041);function i(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(n.Bd[e])}},57055:(e,t,a)=>{a.d(t,{K:()=>E});var n=a(32506),i=a(55518),r=a(52360),s=a(72322),l=a(29286),o=a(37483),c=a(57610),m=a(2960);async function u(e,t){const{balanceAddress:a,chainId:n,symbolType:i,tokenAddress:r,unit:l}=t,o={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:r},[u,d,f]=await(0,m.J)(e,{allowFailure:!1,contracts:[{...o,functionName:"balanceOf",args:[a],chainId:n},{...o,functionName:"decimals",chainId:n},{...o,functionName:"symbol",chainId:n}]});return{decimals:d,formatted:(0,s.b)(u??"0",(0,c.W)(l??d)),symbol:f,value:u}}var d=a(24349);function f(e={}){return["balance",(0,d.O)(e)]}var p=a(86045),h=a(95588),g=a(79492);function E(e={}){const{address:t,query:a={}}=e,m=(0,g.Z)(e),d=(0,h.x)(),E=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:m,...d}=t[1];if(!a)throw new Error("address is required");const f=await async function(e,t){const{address:a,blockNumber:m,blockTag:d,chainId:f,token:p,unit:h="ether"}=t;if(p)try{return u(e,{balanceAddress:a,chainId:f,symbolType:"string",tokenAddress:p})}catch(t){if(t instanceof n.uq){const t=await u(e,{balanceAddress:a,chainId:f,symbolType:"bytes32",tokenAddress:p}),n=(0,i.rR)((0,r.f)(t.symbol,{dir:"right"}));return{...t,symbol:n}}throw t}const g=e.getClient({chainId:f}),E=(0,o.s)(g,l.s,"getBalance"),x=await E(m?{address:a,blockNumber:m}:{address:a,blockTag:d}),b=e.chains.find((e=>e.id===f))??g.chain;return{decimals:b.nativeCurrency.decimals,formatted:(0,s.b)(x,(0,c.W)(h)),symbol:b.nativeCurrency.symbol,value:x}}(e,{...d,address:a});return f??null},queryKey:f(t)}}(m,{...e,chainId:e.chainId??d}),x=Boolean(t&&(a.enabled??!0));return(0,p.aM)({...a,...E,enabled:x})}},7279:(e,t,a)=>{a.d(t,{d:()=>p});var n=a(32506),i=a(72322),r=a(55518),s=a(52360),l=a(57610),o=a(2960),c=a(24349);function m(e={}){return["token",(0,c.O)(e)]}var u=a(86045),d=a(95588),f=a(79492);function p(e={}){const{address:t,query:a={}}=e,c=(0,f.Z)(e),p=(0,d.x)(),h=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:c,...m}=t[1];if(!a)throw new Error("address is required");return async function(e,t){const{address:a,chainId:c,formatUnits:m=18}=t;function u(e){return[{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]}]}try{const t={address:a,abi:u("string"),chainId:c},[r,s,d,f]=await(0,o.J)(e,{allowFailure:!0,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});if(s.error instanceof n.uq)throw s.error;if(d.error instanceof n.uq)throw d.error;if(r.error)throw r.error;if(f.error)throw f.error;return{address:a,decimals:r.result,name:s.result,symbol:d.result,totalSupply:{formatted:(0,i.b)(f.result,(0,l.W)(m)),value:f.result}}}catch(t){if(t instanceof n.uq){const t={address:a,abi:u("bytes32"),chainId:c},[n,d,f,p]=await(0,o.J)(e,{allowFailure:!1,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});return{address:a,decimals:n,name:(0,r.rR)((0,s.f)(d,{dir:"right"})),symbol:(0,r.rR)((0,s.f)(f,{dir:"right"})),totalSupply:{formatted:(0,i.b)(p,(0,l.W)(m)),value:p}}}throw t}}(e,{...m,address:a})},queryKey:m(t)}}(c,{...e,chainId:e.chainId??p}),g=Boolean(t&&(a.enabled??!0));return(0,u.aM)({...a,...h,enabled:g})}}}]);